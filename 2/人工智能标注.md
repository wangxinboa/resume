# 人工智能标注

## 项目简介

&emsp;主要是给一个老项目进行重构， 原本是 vue 框架为基础，加上各种第三方框架。

&emsp;重构之后使用的是 react 框架加 typescript ， 技术上没什么难点， 主要是 react 、 react-router-dom 、 react-redux ，调用 ant-design 实现通用的 ui 组件， 加上原生 javascript 实现的 canvas 绘制操作。可以说是一种复习和积累。 最大的收获是体会到了一个项目维护和重构的意义，个人也对此有了一定的思考。

&emsp;虽然没什么难度，但是时间还是花了不少，一个是接口数量稍微有点多(相关的文档就有 6 个 pdf )；然后前端代码写的也不太行，很萌新的感觉(我想起来了我刚毕业的时候第一个项目的代码)；不过最难的还是，我不清楚其中的使用流程和数据变化，只是大致的和我说了一下可以怎么操作。一个个加起来，最后搞得我每个页面都要先操作一下，了解其中的细节，然后再一点点实现。而且后端还有不少问题，一些关键的信息比较混乱，就很无语，有些都不理解，搞得和解密似的。问后台的负责人，说是不清楚，所以最好不要动，保留原样就好。最后也是佛系了，慢慢实现不着急。

&emsp;虽然是单独的一个项目，不过最终是要合到一个更大的前端项目里面。

&emsp;项目大致可以分成以下部分:

* 登陆注册页面
* 系统管理员用户的操作页面
* 管理员的操作页面
* 标注人员的操作页面

&emsp;(以下内容只有文字，没有图片，不是很直观，勉强算是个使用说明吧。可以简单看看然后跳过，直接看小结。)

### 登陆注册

&emsp;登陆页面就是输入账号、密码和验证码进行登陆，忘记密码的话，简单的提示一下需要联系管理即可。上传数据到接口的时候，密码已经进行了加密 ( crypto.js 实现 )，不是明文密码。

&emsp;注册页面就是输入账号、密码、确认密码、昵称、角色类型(业务管理员或者标注操作员之类)、所在公司(其实就只有一个阿里巴巴)。然后点击注册按钮，等待后台系统管理员审核通过。

### 系统管理员

&emsp;首先是角色管理，基本的增删改查，一开始系统管理员、业务管理员、标注操作员这三个是自带的不可进行删改。然后新增的可以分配权限。

&emsp;权限就是某些按钮和页面是否可以进入。除了在角色管理中分配之外，还可以在单独的页面中进行增删改。

&emsp;可以对注册的用户进行查询审核，同时可以修改其角色身份，并且直接进行增删。

&emsp;可以对组织机构列表进行增删查(其实就是简单一个字符串表示组织机构，在项目没看出来和实际的公司信息有什么联系)。

### 业务管理员

&emsp;主要是对数据标注信息和标注任务进行操作。

&emsp;首先是标注的数据进行管理，标注的数据分为视频、图片、文本三类。图像和文本的话，直接选择没什么问题。视频的话，可以通过选择是否截帧，这样在后台的操作下变成一张张图片；上传可以是本地直接上传和 oss 上传。之后就是删除、查询、预览数据、共享原始数据集给其他业务管理员。

&emsp;之后就是标注标签的管理，所谓标签就是一个名词，比如说“车”，可以将图片分类到“车”这个标签下，或者选择“车”这个标签之后，在一张图片上绘制矩形，表明矩形内的内容就是“车”。可以对标签进行增删改查。

&emsp;之后就是模板管理，模板就是各个选择标签的题型，题型就是用来选择标签的方式。创建模版可以不断添加题型，然后往题型中添加标签。操作也是增删改查。

&emsp;之后就是项目管理了，创建一个项目，输入相关信息、然后添加管理员、添加标注员。可以对新建好的项目进行人员增删改查。

&emsp;在现有的项目下面可以进行创建任务的操作，输入选择任务名称、任务类型等信息，然后选择对应的数据集。选择标注操作人员。选择或者新建模板。再预览提交，最后发布任务。

&emsp;新建任务之外，还可以查看任务进度，并且对已经完成的任务进行审查，判定是否通过或者返工。还可以追加打标人员，或者将打标任务转交给别的标注操作员打标。

&emsp;判定通过的任务，可以在数据集管理的页面中对已经标注好的数据集进行数据导出。

### 标注操作员

&emsp;标注操作员登录之后，首先是进入到任务列表，看到被分配到的标注任务，点击之后，进入任务说明页面，然后再次点击，进入标注操作页面。

&emsp;虽然任务种类有点多，但是按照操作来分也就几类。

1. 分类，就是选择一个标签或者填空输入一个标签，然后选择图片、视频或者文本，归到这个标签下。

2. 绘制，绘制的话主要是对图片类型和截帧的视频(视频截帧之后，数据就是一张张图片了)进行操作。将图片在 canvas 上绘制出来，可以进行移动、放大、缩小。标注操作就是在选择了标签之后进行图像绘制，检测是绘制矩形，分割是绘制多边形。(这块是最无语的，检测和分割这两类数据格式没有统一，一个是数组内用对象元素表示节点，一个是数组内直接数字表示节点。然后 vue 项目又用的两套方式实现，一个是 canvas 第三方框架绘制，一个是 svg 原生实现，svg 的这个多边形的绘制坐标和数据感觉还有些问题，有偏差。怎么能这么实现呢。搞得最后我直接自己重新写了一下绘制操作。技术上就是 javascript 代码调用 canvas 原生 api 结合 dom 事件进行标注绘制)。

3. 文本标注，就是先选择标签，然后再选择文本中的一段文字，将两者对应起来。

## 小结

&emsp;以上是项目简单的使用说明，不过在重构时，并没有全部进行重构，主要是图像部分的标注操作，以及业务管理员的大部分页面。其实，需要重构的部分就是对图像的标注操作，业务管理员和系统管理员操作部分其实不需要重构。(当时不是很清楚，就一直往下写，直到项目负责人找我了，才知道只要重构这一部分就好了。不过，基本的代码结构确定之后，业务管理员和系统管理员的代码都是按部就班的填充完善就好了)

&emsp;主要是管理系统加上标注操作，前端负责数据的展示和交互，后台负责数据的存储和变化。最终大概就是将标注数据输入给 AI 模型，对其进行训练。我负责其中的前端部分(对其他部分的技术不了解)，对其进行重构。

### 收获积累

&emsp;在代码上的话，有以下收获: 

1. 加深了 react 的使用，参照 vue 的项目构建，能够使用 react 、react-router-dom 、react-redux 实现基本的项目构建。 useState 的使用上，参照 react 类组件，都放到一个状态对象中进行管理(我有点受不了一个数据一个 useState 了)。算是一套 react 入门通用的项目模板吧。
2. 了解学习了 typescript 的使用，感觉 typescript 这玩意想要用好的话， 还是有点门槛。 一个是基本的语法熟悉，然后是第三方的框架结合 typescript 的使用得确定了解。 还有就是能够确定整个项目的数据类型以及它们之间关系。 做不到的话，不建议使用 typescript 。 不然的话， 让代码能够成功编译而去符合 typescript 的规范这一点上，会花费不少时间。或者大量地使用 any 而失去使用 typescript 的意义 。当然，练练手的话，就没什么问题了。(顺便说一下，自从我发现 typescript 中 class 的私有变量和方法在编译完之后，在代码上还是能够调用的，只是在编译阶段报错，不让你调用，就感觉心情有点复杂了)
3. 复习了 canvas 绘制的代码实现，这里体会到了不借助框架自己写代码的好处，就是遇到的情况再复杂，都可以在技术上进行处理，整合进自己的代码中。

&emsp;在项目经验上的话，有以下收获: 

1. 让我体会了一下什么是重构老项目(与其说是重构，不如说是参考旧项目，开发了一个新项目)，这方面思考了一下，如果要实现一个项目的长期更新，在创立的开始，可以做什么以方便日后的维护。(主要是我体会到了， 如果在创立一个项目的开始，不做好一些事情的话， 后期就会不断积累问题， 直到爆炸)
2. 在见识到了不是很好的代码之后，思考了怎么写好代码、项目代码的架构以及项目文档的意义和实现。

### 想法

&emsp;目前个人认为，像这类业务需求类的项目，分别是数据、接口、操作。可以通过了解项目中这几类信息来了解整个项目。

&emsp;数据，类似 typescript 的数据类型声明。

&emsp;接口，前端与后台的交互接口。

&emsp;操作，了解页面和页面中的相关操作，知道页面和页面操作中涉及的数据和接口。